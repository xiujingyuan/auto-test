import{o as e}from"./index.05817ad8.js";import{_ as t}from"./RowEditTable.920d73e3.js";import{i as o}from"./@intlify.b71b68c2.js";import{a1 as a,$ as i,a4 as s,m as l,t as n}from"./@vue.160ddf67.js";import"./vue-router.852e3a0b.js";import"./vuex.1d6888bc.js";import"./axios.7b768d2b.js";import"./element-plus.ae16b58d.js";import"./resize-observer-polyfill.8deb1e21.js";import"./lodash.0d6f7410.js";import"./vue-i18n.3f148863.js";import"./vue.21b55118.js";import"./normalize-wheel.1d574cd1.js";import"./mitt.20cc8481.js";import"./dayjs.e712f1b7.js";import"./async-validator.1fa0d626.js";import"./@popperjs.20e5d135.js";import"./vuedraggable.03b46352.js";import"./sortablejs.13d80f5e.js";const r={name:"AssumptTask",components:{RowEditTable:t},data(){let t=this.$route.params.program;const o={cd_biz_repay_jacoco:"cd_biz_repay_jacoco",cd_biz_gate:"cd_biz_gate",cd_biz_central_jacoco:"cd_biz_central_jacoco","Biz-Ind-Repay-Jacoco":"Biz-Ind-Repay-Jacoco","Biz-Tha-Repay-Jacoco":"Biz-Tha-Repay-Jacoco"},a={1:"1",2:"2",3:"3",4:"4",9:"9"},i={0:"准备中",1:"构建中",2:"构建成功",3:"构建失败"};return{tableData:e(t,this.task_type),tableHeader:[{prop:"mail_receive_time",label:"提测时间",fixed:!1,sortable:"custom",filters:"",minWidth:"180"},{prop:"publish_time",label:"发布时间",fixed:!1,sortable:"custom",filters:"",minWidth:"100"},{prop:"gitlab_program_name",label:"项目名称",fixed:!1,sortable:!1,minWidth:"100",edit:!0,editRow:!0},{prop:"build_branch",label:"构建分支",fixed:!1,sortable:!1,filters:"",minWidth:"220",clickFun:!1,edit:!0,editRow:!0,editComponent:"el-input"},{prop:"story_name",label:"需求名",fixed:!1,sortable:"custom",filters:"",showComponent:"el-link",href_prop:"story_url",minWidth:"360"},{prop:"build_jenkins_jobs",label:"Jenkins任务",fixed:!1,sortable:"custom",filters:"",minWidth:"260",editComponent:"el-select",editComponentProps:{options:o},showComponent:"el-select",showComponent_prop:"last_build_jenkins_job",showComponentProps:{options:o},edit:!0,editRow:!0},{prop:"send_order_status",label:"构建环境",fixed:!1,sortable:"custom",filters:"",minWidth:"160",showComponent:"el-select",showComponent_prop:"last_run_env",showComponentProps:{options:a},editComponent:"el-select",editComponentProps:{options:a},edit:!0,editRow:!0},{prop:"send_order_status",label:"构建状态",fixed:!1,sortable:"custom",filters:i,minWidth:"160",editComponent:"el-select",editComponentProps:{options:i},edit:!0,editRow:!0},{prop:"btn",label:"操作",fixed:"right",minWidth:"120",slot:!0}],task_type:"1",program:t}},methods:{changeTableData:e=>(e.forEach((function(e,t){if(console.log(t,e),""==e.publish_time&&(e.publish_time="未发布"),e.build_jenkins_jobs&&o(e.build_jenkins_jobs)){let t=JSON.parse(e.build_jenkins_jobs);e.build_jenkins_jobs=[],t.forEach((function(t,o){0==o&&(e.last_build_jenkins_job=t.name),e.build_jenkins_jobs.push({text:t.name,value:t.name})}))}})),e),changeTaskList(){return this.changeTableData(e(this.program,this.task_type))}}};r.render=function(e,t,o,r,p,d){const m=a("el-tab-pane"),b=a("el-tabs"),c=a("RowEditTable"),_=a("el-col"),u=a("el-row");return i(),s("div",null,[l(b,{modelValue:p.task_type,"onUpdate:modelValue":t[0]||(t[0]=e=>p.task_type=e),class:"demo-tabs",onTabClick:d.changeTaskList},{default:n((()=>[l(m,{label:"测试中",name:"1",select:"select"}),l(m,{label:"已发布",name:"0"})])),_:1},8,["modelValue","onTabClick"]),l(u,null,{default:n((()=>[l(_,{span:24},{default:n((()=>[l(c,{tableData:d.changeTableData(p.tableData),tableHeader:p.tableHeader,maxHeight:300,execRowBtn:!1},null,8,["tableData","tableHeader"])])),_:1})])),_:1})])};export default r;
